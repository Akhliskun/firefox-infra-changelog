## REPOSITORY NAME: VERSION-CONTROL-TOOLS
 CURRENT PUSH ID: 3465

| Changeset | Date | Commiter | Commit Message | Commit URL | 
|:---:|:---:|:----:|:----------------------------------:|:-----:| 
|3464|2019-04-26 18:21:03|Connor Sheehan <sheehan@mozilla.com>|hgserver: add `sparserevlog` capability to `test-obsolescence-server.t` [Bug 1547276](https://bugzilla.mozilla.org/show_bug.cgi?id=1547276) |https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0ec322c77f23
|3464|2019-04-26 18:21:03|Connor Sheehan <sheehan@mozilla.com>|hgserver: add `sparserevlog` bundle requirement to `test-clonebundles.t` [Bug 1547276](https://bugzilla.mozilla.org/show_bug.cgi?id=1547276)  bundles under 4.9.1 include the `sparserevlog` requirement.Since none of the repos on hgmo are in the `sparserevlog` formatyet, this is just extra test output we need to add. It doesn'taffect behaviour in any way.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=58286127f121
|3464|2019-04-26 18:21:03|Connor Sheehan <sheehan@mozilla.com>|hgserver: add `reposetup` timing output to `test-push-basic.t` blackbox logs [Bug 1547276](https://bugzilla.mozilla.org/show_bug.cgi?id=1547276)  4.9.1 now includes repo setup timing information inblackbox logs, which we have yet to add to the tests.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e8a3e082d629
|3461|2019-04-23 22:38:14|Connor Sheehan <sheehan@mozilla.com>|terraform: allow MDC1 hosts to send traffic to InfluxDB test instance [Bug 1545434](https://bugzilla.mozilla.org/show_bug.cgi?id=1545434)  to add these new hosts to the security group rule.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a9512159265c
|3460|2019-04-23 22:28:01|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: move `hgweb` specific components behind a variable [Bug 1545434](https://bugzilla.mozilla.org/show_bug.cgi?id=1545434)  r=smacleodThis way we can deploy our Telegraf config to hgssh,and monitor host-specific things (such as aggregatorlag on hgssh, consumer lag on hgweb, etc).Differential Revision: https://phabricator.services.mozilla.com/D28150|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fae277edab13
|3460|2019-04-23 22:28:01|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: add `--telegraf` flag to aggregator lag check [Bug 1545434](https://bugzilla.mozilla.org/show_bug.cgi?id=1545434)  r=smacleodThis commit adds a `--telegraf` flag to the aggregator lag checkscript running on hgssh. When the script is run with this flag,the output will be formatted as JSON, consumable by Telegraf's`exec` plugin. With this flag added, we will be able to sendaggregator lag data to InfluxDB for monitoring/alerting purposes.D.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7853f082ab09)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7853f082ab09
|3460|2019-04-23 22:28:01|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: add `hgssh` specific plugins to Telegraf config [Bug 1545434](https://bugzilla.mozilla.org/show_bug.cgi?id=1545434)  r=smacleodThis commit adds a `hgssh` specific set of configuration optionsto the Telegraf configuration file. At the moment we track thelag of the "aggregator" replication daemons, and the presenceof processes for those daemons. We also apply the `monitoring-agent`role in the hgssh deploy playbook and set `hgss.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8644eae3410c)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8644eae3410c
|3459|2019-04-23 22:26:29|Connor Sheehan <sheehan@mozilla.com>|terraform: remove `hgmointernal.com` Route53 private hosted zoneWe switched to a public hosted zone instead, so the privatezone is no longer needed.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=675b07956340
|3455|2019-04-17 19:13:30|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: add a test demonstrating pull behaviour on hgssh [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsIn attempting to fix `test-pushkey-obsolescence.t` to makevcsreplicator compatible with Mercurial 4.9, I needed to allowserving the `unfiltered` repoview on hgssh. This had thepotential to change the behaviour of pulls against the sshendpoint on hgmo, so to ensure we don't change the intendedbehaviour by accident, .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e21d785cb133)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e21d785cb133
|3455|2019-04-17 19:13:30|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: remove test output conditional on unsupported Mercurials [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsWe still have quite a few `(hg4X !)` conditional output in testsfor versions that are not 4.8 or 4.9. In this commit, we cleanup our tests by removing the unnecessary conditionals.Differential Revision: https://phabricator.services.mozilla.com/D27779|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=9a114f7abf94
|3455|2019-04-17 19:13:30|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: serve the unfiltered repoview on hgssh [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsThis commit patches the hgssh vcsreplicator Mercurial extension toserve the `unfiltered` repoview for pull operations performed bythe `unfiltereduser`. This fixes failures where consumers wereunable to process `changegroup` messages that referenced now-obsoletechangesets on hgssh. After this patch, the `vcs-sync` user is alw.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2deacafd9abb)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2deacafd9abb
|3455|2019-04-17 19:13:30|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: upgrade Mercurial to 4.9.1 [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsIn this commit we upgrade all hgweb Mercurial installations toversion 4.9.1.Differential Revision: https://phabricator.services.mozilla.com/D27924|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8fdb71a76345
|3455|2019-04-17 19:13:30|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-ssh: upgrade Mercurial to 4.9.1 [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsIn this commit we upgrade all hgssh Mercurial installations toversion 4.9.1.Differential Revision: https://phabricator.services.mozilla.com/D27925|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=d4167b373314
|3454|2019-04-17 17:45:52|Connor Sheehan <sheehan@mozilla.com>|mozhg: fix `test-rewrite.t` [Bug 1544838](https://bugzilla.mozilla.org/show_bug.cgi?id=1544838)  r=larsThis commit adds a new line of test output to`test-rewrite.t`, conditional on Mercurial 4.7 orlater.Differential Revision: https://phabricator.services.mozilla.com/D27815|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=9d8dd59d9bac
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: turn off services irrelevant to hgweb mirrors during deploy [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globWe don't need to serve traffic to Mozilla officesfrom the private hgmo service, so we can turn offthe IP address scraper service.In the future we should refactor the hgweb roleto do this automatically (ie not install an unnecessaryservice in the first place).Differential Revision: https://phabricator.services... [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c3c46a4fa5bf)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c3c46a4fa5bf
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: make hostgroups variable in hgweb/mirrors deploy playbooks [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globBy making the hostgroups variable, we can set variables onthe playbook "includes" that change which hostgroup the playis deployed to. This is useful to deploy the hgweb role andother tasks to hosts in the `bootstrap` group.Differential Revision: https://phabricator.services.mozilla.com/D26991|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1caf95de12c0
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: fix bootstrap and teach it to apply `hg-web` role [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globThere were a few subtle bugs with the hgweb bootstrapplaybook, including the fact that it assumed the hg-webrole was already applied. This commit adds code tooptionally apply hgweb/mirror playbooks on the existanceof an appropriate variable. The directory of the`hgssh.json` file is changed to the `hg` users home.We set .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0670903b02ed)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0670903b02ed
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: make the number of concurrent clones variable [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globPreviously we had hard coded 5/8 as the number of concurrentworkers for the bootstrap processes. Making these variablewill allow us to scale up/down the number of workers asneeded for mirrors.Differential Revision: https://phabricator.services.mozilla.com/D26993|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c3ad5a07b5fc
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: document new variables in bootstrap Ansible playbook [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globA small description of how to use the playbook at the top,as we do with most other Ansible playbooks.Differential Revision: https://phabricator.services.mozilla.com/D26994|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=59aedaf8f7f6
|3453|2019-04-15 16:54:12|Connor Sheehan <sheehan@mozilla.com>|ansible: add new hgweb mirrors to `hgweb-mirrors` hostgroup [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globThese are the new IPs for the mirrors in us-west-2.Differential Revision: https://phabricator.services.mozilla.com/D26995|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0dfd8f1e780b
|3452|2019-04-12 16:03:23|Andi-Bogdan Postelnicu <bpostelnicu@mozilla.com>|configwizard: Disable 'format-source' extension since it served it's purpose. [Bug 1543645](https://bugzilla.mozilla.org/show_bug.cgi?id=1543645)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D27050|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=699240458208
|3451|2019-04-11 20:41:39|K Lars Lohn <lars@mozilla.com>|vcsreplicator: update test, correcting order of expected output [Bug 1543448](https://bugzilla.mozilla.org/show_bug.cgi?id=1543448)  r=sheehanMachines of differing speeds produce the output of the test,test-consumer-daemon-restart.t, in a differing orders. Thischange synchronizes the output by adding a consumerwith "--wait-for-no-lag". This causes a pause that allows thetests that run subsequently to always have the same orderof expected output.The fo.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7951e7b5e7bf)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7951e7b5e7bf
|3450|2019-04-11 20:37:19|K Lars Lohn <lars@mozilla.com>|vcsreplicator: simplify shutdown signal handlers [Bug 1543450](https://bugzilla.mozilla.org/show_bug.cgi?id=1543450)  r=sheehanThe existing shutdown signal handler fails to take into account the EINTRexception raised by blocking system calls. This is raised when the signalis caught during a system call like reading from a socket by Kafka. Thishappens when the signal handler simply returns without raising an exceptionof its own. The exsting handler .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a99aa3f3fd35)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a99aa3f3fd35
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: rename `ci-only` module to `aws-vpc` [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackWhen I originally created the Terraform configs for the hgmoAWS account, our design goals were to isolate all resourcesfor the private hgweb mirrors into their own VPC. Afterworking towards productionizing these resources over thelast few months, I decided it makes more sense to havea single VPC for all hg related resources in t.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1340d12236b1)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1340d12236b1
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: make hgweb mirror instances variable [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackCurrently we only have a single hgweb mirror stood up,with the instance type of that mirror hard coded into it's Terraform module. This commit makes the instancetype a variable so we can add/reduce the compute powerif necessary.Differential Revision: https://phabricator.services.mozilla.com/D26977|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=51b1d5add43c
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: remove `environment_users` variable [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackWe were going to use this to create new users as partof our user data input. We've switch to a hard-codedcloud config for now, so this is safe to remove.Differential Revision: https://phabricator.services.mozilla.com/D26978|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8219a59625be
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: upgrade InfluxDB instance to `c4.2xlarge` [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackThis is only temporary while I work on redirecting ourInflux data to Mozilla's production instance.Differential Revision: https://phabricator.services.mozilla.com/D26979|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2755b890648b
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: move ELB target group attachment into the `hgweb-mirror` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackWe will need one attachment per instance - rather than create newattachments each time, let's just add the attachment to the moduleitself.Differential Revision: https://phabricator.services.mozilla.com/D26980|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0c9bfcf4a389
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: create new hgweb mirror host [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackThis host will be 1 of 2 attached to the internal loadbalancer.Differential Revision: https://phabricator.services.mozilla.com/D26981|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=36c8c075447e
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: rename `test-hgweb-mirror` to `hgweb-a` [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackSame code, but a new instance in AWS.Differential Revision: https://phabricator.services.mozilla.com/D26982|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=b0dedd649093
|3449|2019-04-11 00:36:31|Connor Sheehan <sheehan@mozilla.com>|terraform: increase disk space to 150GB on hgweb mirrors [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackWe were hitting the edge at 100GB.Differential Revision: https://phabricator.services.mozilla.com/D26983|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0ed956b29df0
|3448|2019-04-08 20:14:01|Sylvestre Ledru <sledru@mozilla.com>|hgext: clang-format hg hook: Ignore unsupported extensions directly in the hook [Bug 1542632](https://bugzilla.mozilla.org/show_bug.cgi?id=1542632)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D26446|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0c95e8341526
|3446|2019-04-05 17:05:36|Connor Sheehan <sheehan@mozilla.com>|configwizard: remove warning about experimental status of `evolve` extension [Bug 1541887](https://bugzilla.mozilla.org/show_bug.cgi?id=1541887)  r=glob`evolve` is stable enough that we recommend it to developersworking on Firefox repos. The warning about it's "experimental"status is confusing and is likely driving people away fromadopting it for their workflow. This commit removes the warningand indicates that installation of `evolve` is desirable. W.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=77705a8ba4f5)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=77705a8ba4f5
|3445|2019-04-04 20:49:04|K Lars Lohn <lars@mozilla.com>|hg49: make vcsreplicator/tests compatible [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehan1 - tests that list the .hg need to have some additonal files that are seen when using hg49 (.../test-hgrc-replicate.t)2 - tests that depend on the contents of the .../mozilla-central/.hg/requires file need to have an additional line when using hg49Differential Revision: https://phabricator.services.mozilla.com/D26210|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=75145f5864c4
|3444|2019-04-03 23:01:15|Connor Sheehan <sheehan@mozilla.com>|hghooks: make hooks compatible with Mercurial 4.9 [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsHere we make the hooks tests pass under Mercurial 4.9. A newlog statement was added during the `reposetup` stage ofextension loading, which is seen in the test output.Many `(?)` statements are removed and replaced with inlineversion checks.Differential Revision: https://phabricator.services.mozilla.com/D25956|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=71545cbde3e6
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/firefoxreleases [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25966|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=28f1a8fade1c
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/pushlog [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanadded new "cache" and "wcache" present only in hg49removed 2 "#if h42" blocks because we're not using versions older than 4.8tagged 2 "--config" lines as not appearing when using hg49Differential Revision: https://phabricator.services.mozilla.com/D25967|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2046b5bf6072
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/readonly [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25968|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2b23ebba2fb5
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/replicateowner [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25969|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f498a35dc46e
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/serverlog [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25970|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=d4aecc778e9f
|3443|2019-04-03 22:59:17|K Lars Lohn <lars@mozilla.com>|hg49: hgext/unifyrepo [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25971|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=db170e81bb17
|3442|2019-04-03 21:37:31|Connor Sheehan <sheehan@mozilla.com>|hgmo: make compatible with Mercurial 4.9 [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=larsTest extension works as intended under 4.9, with a fewminor additions to tests. A new cache file `wcache` hasbeen added as a virtual file system cache for filesrelated to the working copy. The UNIX-like exec flagcheck caches are no longer shown when displaying thecaches available on the local repository as the codepath that created them .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=32f607700768)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=32f607700768
|3441|2019-04-03 19:33:13|Connor Sheehan <sheehan@mozilla.com>|py3: global replace `repo['` with `repo[b'` [Bug 1541166](https://bugzilla.mozilla.org/show_bug.cgi?id=1541166)  r=larsUsing `__getitem__` on classes that subclass `repository` (suchas `localrepository`) results in Python 3 compatibility failuressince we are currently not marking our strings with `b''`. Thiscommit does a global replace to assert all strings passed as suchare byte strings.Differential Revision: https://phabricator.services.mozilla.com/.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f1043f9d2312)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f1043f9d2312
|3439|2019-04-02 23:41:03|Connor Sheehan <sheehan@mozilla.com>|py3: remove Python 3 incompatible calls to `execfile` [Bug 1541166](https://bugzilla.mozilla.org/show_bug.cgi?id=1541166)  r=larsThis commit replaces all calls to `execfile` with a fileread and call to `exec`, with file content as the parameter.Differential Revision: https://phabricator.services.mozilla.com/D25849|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2c7002f9e788
|3438|2019-04-02 23:29:11|K Lars Lohn <lars@mozilla.com>|Python2/Python3 compatibility - try/except form for pylib/mercurial-support/killdaemons.py [Bug 1541166](https://bugzilla.mozilla.org/show_bug.cgi?id=1541166)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D25850|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=13daf68f9066
|3437|2019-03-30 18:43:28|Connor Sheehan <sheehan@mozilla.com>|hgext: mark several extensions as incompatible with legacy Mercurial [Bug 1539585](https://bugzilla.mozilla.org/show_bug.cgi?id=1539585)  r=larsEach of the following extensions has tests failing underolder versions of Mercurial, due to dependencies on the`hgmo` extension, which is only compatible with Mercurial4.8:- firefoxreleases- pushlog- unifyrepo- hghooks extensionConsidering all of these extensions run on the server,on which we currently run ver.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=005eaf9c1236)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=005eaf9c1236
|3437|2019-03-30 18:43:28|Connor Sheehan <sheehan@mozilla.com>|hgserver: add new bundle2 capability to `test-obsolescence-server.t` [Bug 1539585](https://bugzilla.mozilla.org/show_bug.cgi?id=1539585)  r=larsThis new output was introduced in Mercurial 4.7. The server isnow capable of transmitting v2 stream clone bundles, as shownin this new output. See `hg help internals.wireprotocol.bundle2`for more information on the format of the new content.The output is now alphabetically sorted by default, negating theneed f.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e99a6865db81)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e99a6865db81
|3437|2019-03-30 18:43:28|Connor Sheehan <sheehan@mozilla.com>|hgserver: add `content-security-policy` header to `test-static-files.t` output [Bug 1539585](https://bugzilla.mozilla.org/show_bug.cgi?id=1539585)  r=larsNot long ago we added `hg.mozilla.org/static/` to thecontent security policy. This means that grep-ing for"static" will pick up the header in tests.Differential Revision: https://phabricator.services.mozilla.com/D25386|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e473826ccc95
|3435|2019-03-28 21:14:17|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: fix indentation in Telegraf restart handlerAccidentally indented one level too many, which causes Ansibleto barf as it doesn't recognize that key for the `service`module.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=9f56254cb36b
|3434|2019-03-28 18:31:10|K Lars Lohn <lars@mozilla.com>|[Bug 1522496](https://bugzilla.mozilla.org/show_bug.cgi?id=1522496)  step 1 - move implementation of script generate-hg-s3-bundles to .../hgserver/hgmolib r=sheehanThis processed involved using the "entry_point" system in setup_tools for making a newexecutable for generate-hg-s3-bundles. Tests had to be changed to use the new methodof invocation. The original invocation method involved using a "-u" switch on thepython exectuable - this migrated to usi.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=76f73a7f2a56)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=76f73a7f2a56
|3434|2019-03-28 18:31:10|K Lars Lohn <lars@mozilla.com>|[Bug 1522496](https://bugzilla.mozilla.org/show_bug.cgi?id=1522496)  step 1.5 - simplify testing of known exceptions r=sheehanPrevious versions included tracebacks when a test induced an exception.This added no value to the test and made it more difficult to movedependent modules or upgrade to new versions of Python. The code wasmodified to move from tracebacks with unhandled exceptions to justnoting the exception and associated metadata on stdout bef.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=79691d65850e)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=79691d65850e
|3433|2019-03-27 19:02:07|Connor Sheehan <sheehan@mozilla.com>|hgext: add `buglink` field to source formatting related extensionsWith this field added, when either of the extensions errors out,there will be a suggestion to users as to where they should filebugs.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=848dc37f2562
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: specify database/retention policy when defining Kapacitor tasksFor whatever reason, one of the|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=cbf8c0e26257
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: remove unnecessary alert node from vcsreplicator processes TICKscriptThe `alert` node has been moved lower, to conformto the recommended TICKscript format of "dataframe,thresholds, alert".|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4eb6475ec2f5
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: fix formatting of disk space percentagePreviously we were writing the percentage up to 14 digits.This is obviously completely unnecessary, so this commitdisplays only two digits instead.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4b4c40c7d3f7
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: fix vcsreplicator consumer lag tickscriptThis commit fixes some minor issues with the existingTICKscript and extends it to include monitoring ofthe vcsreplicator heads process.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f6a622bc3499
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: add `replicationrules` section to heads consumer config|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1bacdb36a603
|3431|2019-03-25 19:34:46|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: add Telegraf restart handlerMaking changes to the Telegraf config file requires arestart of the daemon for changes to take effect. Thiscommit adds a handler to the `monitoring-agent` roleto force a restart when the config file is modifiedon disk.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2d82a492c54d
|3430|2019-03-25 16:11:27|Connor Sheehan <sheehan@mozilla.com>|ansible: remove `mozilla-taskcluster` reset reminder from twig reset playbookTaskcluster now triggers job for pushes to Mercurial reposusing Pulse notifications, so there is no need to filea bug for the reset.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=394ce6dbce13
|3429|2019-03-18 18:40:37|Connor Sheehan <sheehan@mozilla.com>|configwizard: direct users to tweakdefaults help section during setup [Bug 1531059](https://bugzilla.mozilla.org/show_bug.cgi?id=1531059)  r=globWe previously pointed users at the `FriendlyHGPlan` Mercurialwiki page. That page has some useful information but has gonestale in recent memory. The information found in the help commandis more recent and will stay relevant from release-to-release.Differential Revision: https://phabricator.services.mozilla.c.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ed0659b2777d)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ed0659b2777d
|3429|2019-03-18 18:40:37|Connor Sheehan <sheehan@mozilla.com>|configwizard: move `curses` availability check to standalone function [Bug 1531059](https://bugzilla.mozilla.org/show_bug.cgi?id=1531059)  r=globIt turns out we already check for the presence of `curses`on the system in a separate function in `configwizard`,however the check is coupled with a prompt to enablethe curses interface. Here we move the check itself intoa separate function so we can re-use the functionalityin the next commit.Differential Rev.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=161be99fbe9b)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=161be99fbe9b
|3429|2019-03-18 18:40:37|Connor Sheehan <sheehan@mozilla.com>|configwizard: set `ui.interface=text` on Windows [Bug 1531059](https://bugzilla.mozilla.org/show_bug.cgi?id=1531059)  r=globTweakdefaults causes the default interface to change to `curses`on Windows. This can cause issues as curses is not supported outof the box. This commit adds a check to ensure `curses` is availableon the user's system and reverts the default UI to `text` whenit is not.Differential Revision: https://phabricator.services.mozilla.com.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4520aa3d301e)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4520aa3d301e
|3428|2019-03-14 18:43:22|Connor Sheehan <sheehan@mozilla.com>|robustcheckout: add a `serverUrl` key to CI metrics output [Bug 1535011](https://bugzilla.mozilla.org/show_bug.cgi?id=1535011)  r=smacleodWith private hg mirrors being rolled out in the near future,we would like to be able to differentiate our CI metricsbetween operations against the public hgmo service, andthe private mirrors. In this commit we parse the url passedto `robustcheckout` using `urlparse.urlparse`, and addthe network location to the outpu.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8e3bb142dfa9)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8e3bb142dfa9
|3427|2019-03-13 18:00:48|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: sort Telegraf JSON output before printing [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  up on D23175, we should sort the JSON output to ensureconsistency in the tests.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=787715ced0ac
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: install Kapacitor to monitoring host [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globAs a first step towards monitoring hg.mo with the InfluxDB stack,we installed the database, user interface and monitoring agent(InfluxDB, Chronograf and Telegraf, respectively). Now that wehave some of the basic dashboards and monitoring data beingcollected and queryable, we need to install Kapacitor (the Influxdata .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0c90eaaba78e)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0c90eaaba78e
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible: add a playbook to deploy to monitoring host [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis will be a temporary file that just applies the `monitoring-host`role to a specific host in the inventory. In the future this willbe removed as we send our data to a hosted Influx instance.Differential Revision: https://phabricator.services.mozilla.com/D23171|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=90dd6690c0fc
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible: apply `monitoring-agent` role to hgweb mirrors [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globWe will need this role applied to get data from thehgweb mirrors. Previously we applied the role asa dependency of the hg-web role, but that brokethe test suite as the monitoring role assumedthe presence of the `/var/log/httpd` directory ondisk. It was rolled back in f923e988151c to fixthe test suite.Differential Revision:.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7e9917aaf191)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7e9917aaf191
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: make `telegraf.conf` a template [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis will allow us to use plugins on relevant hosts basedon different conditions. For example, once we deploy themonitoring agent to the hgssh hosts, we will have no needfor the `Apache` plugin, but we will want to use the `procstat`plugin to monitor the existance of various other processes.Differential Revision: https:/.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e6f32b9d217c)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e6f32b9d217c
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: switch from `systemd_unit` to `pattern` use of `procstat` plugin [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globWhen I attempted to port the vcsreplicator daemon countalert to Kapacitor/TICKscript, I realized that instructingthe `procstat` plugin to monitor a specific systemd unitwould not tell InfluxDB when the unit failed, only whena unit of that name was not loaded into the system. Byswitching t.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=cbaaccde6e74)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=cbaaccde6e74
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: add `Telegraf` flag to Nagios checks [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds a flag to format output from thecustom Nagios checks for consumption by Telegraf.The `exec` Telegraf plugin will query the offsetchecking script with this parameter (as shown inthe test) and send the returned value back to Influxfor use in an alerting TICKscript.Differential Revision: https://phabricator.servi.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=b1793247e820)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=b1793247e820
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: enable `exec` Telegraf plugin to check vcsreplicator lag [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds instances of the `exec` Telegraf pluginwhich poll the vcsreplicator Nagios check for data aboutconsumer lag. A later commit adds a TICKscript to alerton different thresholds of lag.Differential Revision: https://phabricator.services.mozilla.com/D23176|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=930b41909ba3
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: add TICKscript to alert for missing vcsreplicator processes [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit takes the first step in porting the existing Nagioschecks to the InfluxDB platform (specifically Kapacitor). We createan alert which queries the `procstat_lookup` measurement for pointswith a `pattern` tag matching "vcsreplicator-consumer". Whenwe do not find 8 running systemd units.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=827037a767ad)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=827037a767ad
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: add a TICKscript to check vcsreplicator consumer lag [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globBuilding on previous commits, this commit adds a TICKscriptto monitor vcsreplicator consumer lag data pulled from the`exec` Telegraf plugin.Differential Revision: https://phabricator.services.mozilla.com/D23178|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a52b64093d31
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: add a TICKscript to monitor remaining disk space [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds a TICKscript to alert on high disk space usage.Thresholds are adapted from existing IT Nagios checks.Differential Revision: https://phabricator.services.mozilla.com/D23179|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2885a2a097ba
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: add a TICKscript to monitor system load [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds a TICKscript to monitor high load onmonitored instances. Thresholds are adapted fromexisting IT Nagios checks.Differential Revision: https://phabricator.services.mozilla.com/D23180|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ff1acf3da77a
|3426|2019-03-13 16:52:05|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-host: install Kapacitor tasks to monitoring host [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit installs our new TICKscripts on the testmonitoring host.Differential Revision: https://phabricator.services.mozilla.com/D23181|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e95b70411f81
|3425|2019-03-13 00:59:17|Steve Fink <sfink@mozilla.com>|[Bug 1511093](https://bugzilla.mozilla.org/show_bug.cgi?id=1511093)  - Minor spelling and wording fixes r=andiDifferential Revision: https://phabricator.services.mozilla.com/D16371|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=68f59905d10e
|3424|2019-03-07 16:45:51|Ludovic Hirlimann <ludovic@mozilla.com>|pash: Change component where bugs are file when Mercurial accounts are disabled because of inactivity. Move from Moc Service Request to LDAP. [Bug 1532963](https://bugzilla.mozilla.org/show_bug.cgi?id=1532963)  r=sheehanBefore this change, when an account is expired the message displayed says to open a bug in Moc Service request. Moc is no more , changing the message to file a bug in the LDAP component.Differential Revision: https://phabricator.services.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=33ee1b57476c)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=33ee1b57476c
|3423|2019-03-04 20:53:18|K Lars Lohn <lars@mozilla.com>|[Bug 1523745](https://bugzilla.mozilla.org/show_bug.cgi?id=1523745)  removed implementation of mozbuild-info r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D21768|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6160c590b717
|3421|2019-02-28 18:12:34|Connor Sheehan <sheehan@mozilla.com>|hgtemplates: fix `test-template-sync.t`When I added the `ci/` repo directory to hgmo, I addedsome lines to `index.patch` to apply our changes to theindex.html page. These changes caused the patch fileto no longer make sense to Mercurial and so the testfails. This commit fixes the patch file and thereforethe test.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=9c4f528f5401
|3420|2019-02-28 17:47:30|Connor Sheehan <sheehan@mozilla.com>|configwizard: mark as compatible with Mercurial 4.9|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=309342d56957
|3418|2019-02-27 22:17:17|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: install `monitoring-agent` role after hg-web role [Bug 1531108](https://bugzilla.mozilla.org/show_bug.cgi?id=1531108)  `monitoring-agent` as a dependency of `hg-web` willcause a failure during initial bootstrap due to the absenceof `/var/log/httpd` from the filesystem. This commit movesthe application of `monitoring-agent` from a dependency toan explicit post-step in the `deploy-hgweb` playbook.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f923e988151c
|3417|2019-02-27 18:21:30|Connor Sheehan <sheehan@mozilla.com>|terraform: add `lars` user to cloud-config user data [Bug 1530708](https://bugzilla.mozilla.org/show_bug.cgi?id=1530708)  r=bstackThis commit adds a login for Lars to the user data for ourAWS hgweb mirrors.Differential Revision: https://phabricator.services.mozilla.com/D21229|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=388175bb81ef
|3417|2019-02-27 18:21:30|Connor Sheehan <sheehan@mozilla.com>|terraform: define security group rules as independent resources [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackPreviously we defined security group rules inline with the definitionof the security group itself. This is problematic when we want todefine rules that allow access between hosts in different securitygroups (ie allowing traffic to flow between the load balancer andinstances in the balancer's target groups). Terra.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5bd810508bfc)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5bd810508bfc
|3417|2019-02-27 18:21:30|Connor Sheehan <sheehan@mozilla.com>|terraform: add rule to allow traffic between internal load balancer and CI instances [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackThis commit adds a new load balancer rule to allow traffic betweeninstances in the load balancer target group and the load balanceritself.Differential Revision: https://phabricator.services.mozilla.com/D21248|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=da500592cfa4
|3417|2019-02-27 18:21:30|Connor Sheehan <sheehan@mozilla.com>|terraform: allow traffic from Telegraf reporting agent to hgci security group [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=bstackNetOps provided flows to allow traffic sent by Telegraf back tomy InfluxDB host in us-west-2. This commit creates a securitygroup rule to allow the traffic through.Differential Revision: https://phabricator.services.mozilla.com/D21281|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3e183cf1d525
|3416|2019-02-26 00:23:51|Connor Sheehan <sheehan@mozilla.com>|hgmo: fix `test-treeherder.t` [Bug 1526284](https://bugzilla.mozilla.org/show_bug.cgi?id=1526284)  2dbca49f704c we landed a change to show Perfherderlinks on changeset views for the `autoland` repo. Someother work impeded my response time on the review, and inthe interest of unblocking others I pushed the changesetthrough with a known busted test. This commit is a followup to properly fix the test and cover all cases under thenew behaviour.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c84cacc6a613
|3415|2019-02-25 17:05:33|Connor Sheehan <sheehan@mozilla.com>|httpd: use same CSP header for `reftest-analyzer-structured.xhtml` as `reftest-analyzer.xhtml` [Bug 1530002](https://bugzilla.mozilla.org/show_bug.cgi?id=1530002)  r=globAs described in the bug, we need to except the "structured"reftest analyzer file in the same way as the standard file.Differential Revision: https://phabricator.services.mozilla.com/D20878|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=20814b01e70f
|3414|2019-02-22 21:03:26|Sebastian Hengst <archaeopteryx@coole-files.de>|[Bug 1526284](https://bugzilla.mozilla.org/show_bug.cgi?id=1526284)  - also show perfherder links for autoland repositories r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D19145|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2dbca49f704c
|3413|2019-02-22 18:03:54|Connor Sheehan <sheehan@mozilla.com>|ansible: add `warn=False` to manual runs of `yum` from AnsibleIn e2bf8a8e475b I changed all calls to `yum localinstall` to insteaduse the `yum` Ansible module. The only cases where I was unable to doso involved calling a `versionlock` command which requires a pluginfor `yum` which is unsupported by the Ansible module. These instancesstill spawn a warning during deploy, so this commit turns off the.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f2bdff4bbf47)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f2bdff4bbf47
|3412|2019-02-22 00:43:48|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: make `/var/log/httpd` readable by telegraf [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=smacleodThis commit sets the Apache httpd log directory permissions to701, so the Telegraf agent (running as the `telegraf` user) canread them.Differential Revision: https://phabricator.services.mozilla.com/D20680|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=51720b1692ab
|3412|2019-02-22 00:43:48|Connor Sheehan <sheehan@mozilla.com>|ansible/monitoring-agent: enable logparser plugin [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=smacleodThis commit turns on the logparser Telegraf plugin in the`monitoring-agent` Ansible role.Despite defining our own custom log format in the hgmo httpdvhost, I realized that we specify the "combined" log format onthe following line.Differential Revision: https://phabricator.services.mozilla.com/D20681|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=181467371f33
|3412|2019-02-22 00:43:48|Connor Sheehan <sheehan@mozilla.com>|ansible: use `yum` module to install packages [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=smacleodThis commit switches all uses of the `command` module which callout to `yum` to instead use the `yum` Ansible module directly.A few locations still call out to `yum` to use the versionlockyum plugin. I found an open GitHub issue stating there is no wayto accomplish this with the `yum` module directly, so those areleft as-is for .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e2bf8a8e475b)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e2bf8a8e475b
|3411|2019-02-21 21:18:42|Connor Sheehan <sheehan@mozilla.com>|hgext/clang-format: move call to `mach clang-format` to separate function [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sylvestreThis will allow us to use the logic again in a child commit.Differential Revision: https://phabricator.services.mozilla.com/D20513|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=37349596868f
|3411|2019-02-21 21:18:42|Connor Sheehan <sheehan@mozilla.com>|hgext/clang-format: wrap `cmdutil.amend` to run clang-format during `hg commit --amend` [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sylvestreThis commit adds support for `hg commit --amend` to the clang-formatextension. `cmdutil.amend` is wrapped and some of the basic logic(such as building the matcher object and creating the list of filesto be amended) is pulled into the wrapper function to determine ifclang-format should b.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=692fd8eec939)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=692fd8eec939
|3410|2019-02-21 17:55:03|Connor Sheehan <sheehan@mozilla.com>|ansible: add `monitoring-host` role [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds a `monitoring-host` Ansible role whichconfigures a CentOS7 host with elements of the Influxdata"TICK stack", namely InfluxDB and Chronograf. Installationis done via an RPM and the installation adds a systemd unitfor the services to the host.Differential Revision: https://phabricator.services.mozilla.com/D20356|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fb962b3fd80c
|3410|2019-02-21 17:55:03|Connor Sheehan <sheehan@mozilla.com>|ansible/terraform: add monitoring host resource [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=bstackThis commit adds a Terraform `aws_instance` resource forthe InfluxDB monitoring host. The new host uses the sameAMI as the hgweb mirrors (most recent CentOS7) and ac4.xl instance, due to the CPU intensive nature of InfluxDB.Differential Revision: https://phabricator.services.mozilla.com/D20357|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1f81652d6224
|3410|2019-02-21 17:55:03|Connor Sheehan <sheehan@mozilla.com>|ansible: add `monitoring-agent` Ansible role [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds a `monitoring-agent` Ansible role which willinstall the Telegraf reporting agent from the InfluxDB stackon desired hosts. As a basic first step, in this commit we installthe RPM package and install a basic config file which enablesall plugins required to populate the pre-canned Chronograf dashboardsto monitor Apache .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e999ea1db5fb)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e999ea1db5fb
|3410|2019-02-21 17:55:03|Connor Sheehan <sheehan@mozilla.com>|ansible: make `monitoring-agent` role a dependency of `hg-web` role [Bug 1525954](https://bugzilla.mozilla.org/show_bug.cgi?id=1525954)  r=globThis commit adds the previously created `monitoring-agent` role asa dependency of the `hg-web` role. This will cause the Telegrafmonitoring agent to be installed on all hg-web hosts (AWS mirrorsand on-premises hosts) and report metrics to the InfluxDB instancerunning in AWS.I have deployed the agent to the mirr.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=291be8cdfe8c)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=291be8cdfe8c
|3409|2019-02-20 00:23:23|Connor Sheehan <sheehan@mozilla.com>|hgext: fix `clang-format` test hashesAfter making a change, the hashes in tests appear to havechanged and it slipped under my radar. Update them nowto get tests passing.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=d7d606b24f2c
|3408|2019-02-19 19:51:36|Sylvestre Ledru <sledru@mozilla.com>|hgext: Add a new hg extension to run clang-format at the commit step [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D18883|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=b5bd6cdbb737
|3408|2019-02-19 19:51:36|Sylvestre Ledru <sledru@mozilla.com>|hgext: Add clang-format to the bootstrap process [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sheehanDepends on D18883Differential Revision: https://phabricator.services.mozilla.com/D18882|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=79d0d5b4b4a0
|3408|2019-02-19 19:51:36|Sylvestre Ledru <sledru@mozilla.com>|hgext: Add a test for the clang-format extension [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sheehanDepends on D18882Differential Revision: https://phabricator.services.mozilla.com/D19588|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=148d671f1adf
|3408|2019-02-19 19:51:36|Sylvestre Ledru <sledru@mozilla.com>|hgext: Ride along: rename pull/push to wrappedpull/wrappedpush [Bug 1525725](https://bugzilla.mozilla.org/show_bug.cgi?id=1525725)  r=sheehanDepends on D19588Differential Revision: https://phabricator.services.mozilla.com/D19589|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c277b6bd2680
|3405|2019-02-15 17:12:08|Connor Sheehan <sheehan@mozilla.com>|ansible: move deploy steps for each host type into separate files [Bug 1502984](https://bugzilla.mozilla.org/show_bug.cgi?id=1502984)  r=globAfter make use of the new `--skip-<host>` flags in the hgmodeployment script over the last few weeks, I realized we spenda decent chunk of time gathering Ansible facts for hosts thatwe intend to skip during deployment. This commit moves the deploymentsteps out of `deploy-hgmo.yml` and into separate playbooks, whi.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ed6314dfe291)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ed6314dfe291
|3404|2019-02-14 00:46:05|Sebastian Hengst <archaeopteryx@coole-files.de>|bzpost: use latest changeset revision of Try push to generate treeherder url [Bug 1526414](https://bugzilla.mozilla.org/show_bug.cgi?id=1526414)  r=sheehanSupport for using any revision in a push was removed in [Bug 1306707](https://bugzilla.mozilla.org/show_bug.cgi?id=1306707)  Now the revision of the pushhead is required.Differential Revision: https://phabricator.services.mozilla.com/D19183|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=d7fbbbdf868e
|3403|2019-02-12 22:28:52|Connor Sheehan <sheehan@mozilla.com>|terraform: add `Name` tag to load balancer security group|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ea975dc5fa8f
|3403|2019-02-12 22:28:52|Connor Sheehan <sheehan@mozilla.com>|terraform: allow interactions between resources in the hgci security group|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=609f6e7b266f
|3402|2019-02-11 19:02:52|Tom Prince <mozilla@hocat.ca>|push-to-try: Add test for pushing to a named path `try` by default; r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D19382|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=aa000ef731af
|3401|2019-02-11 17:10:20|Tom Prince <mozilla@hocat.ca>|push-to-try: Fix new default handling [Bug 1526573](https://bugzilla.mozilla.org/show_bug.cgi?id=1526573)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D19226|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2a5ed4db102d
|3400|2019-02-08 19:09:45|Tom Prince <mozilla@hocat.ca>|[push-to-try] Default to pushing to a named path `try`, if one exists; r=sheehanThere are now quite a few[1] try repositories. If a user has configured thatrepository to be named `try`, default to pushing there, rather than alsorequiring setting a default for `push-to-try`.[1] nss-try, try-comm-central, ci-admin-try, ci-configuration-try, taskgraph-tryDifferential Revision: https://phabricator.ser.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c853cc7fbbec)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c853cc7fbbec
|3399|2019-02-08 19:06:22|Connor Sheehan <sheehan@mozilla.com>|terraform: fix cloud-config user dataThe `hg` user was being incorrectly created and causingnew instance to be inaccessible. We also forgot to createthe `/var/hg` directory before attempting to write a fileto it.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=42073c47ca96
|3399|2019-02-08 19:06:22|Connor Sheehan <sheehan@mozilla.com>|terraform: update to newest CentOS7 AMIsThe old AMI we were using only include cloud-init v0.7.2.We require at least v18.2 for the `instance-data.json`file to be written to disk.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4e41e6a64f6f
|3396|2019-02-04 22:09:37|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: add new `ci` top-level directory to `replicationrules` [Bug 1523461](https://bugzilla.mozilla.org/show_bug.cgi?id=1523461) |https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f31557eb7e37
|3394|2019-01-30 21:11:17|Calixte Denizet <cdenizet@mozilla.com>|mozext: add backedoutby keyword for hg log --template [Bug 1523961](https://bugzilla.mozilla.org/show_bug.cgi?id=1523961)  r=sheehanThe field 'backedoutby' is present in the json output but not in hg log --templateDifferential Revision: https://phabricator.services.mozilla.com/D18107|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=b6fdb20fa609
|3393|2019-01-29 20:43:05|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: add `ci` directory to hgmo vhost config [Bug 1523461](https://bugzilla.mozilla.org/show_bug.cgi?id=1523461)  r=fubarWe set up the hgwsgi files, but never taught httpd how toserve them correctly. This commit adds them to the vhostconfig to hgmo knows to load the correct wsgi files forthose paths.Differential Revision: https://phabricator.services.mozilla.com/D17961|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3b362b7a9144
|3392|2019-01-29 17:54:40|Connor Sheehan <sheehan@mozilla.com>|hgtemplates: add `ci` directory to index template [Bug 1523461](https://bugzilla.mozilla.org/show_bug.cgi?id=1523461)  r=fubarDifferential Revision: https://phabricator.services.mozilla.com/D17946|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e20add4aea9f
|3391|2019-01-29 17:32:10|Connor Sheehan <sheehan@mozilla.com>|hgwsgi: add WSGI config files for new `ci` top-level directory [Bug 1523461](https://bugzilla.mozilla.org/show_bug.cgi?id=1523461)  r=fubarBy the time this lands, the directory and initial repositorieswill have been created on hgmo. Adding these files and runninga deploy will make publicly available.Differential Revision: https://phabricator.services.mozilla.com/D17943|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c91ad98669ef
|3390|2019-01-29 16:58:43|Connor Sheehan <sheehan@mozilla.com>|terraform: add hg user in cloud config and use quotes around shell commands [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  out the `chown` command fails after landing 3548753ac274,at first because the `hg` user is not yet defined. Once it isdefined, it fails because the ":" character is invalid YAML.This commit defines the hg user after defining my user, andadds quotes around each parameter in the `runcmd` section,which fixe.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=06a9ba5d8860)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=06a9ba5d8860
|3389|2019-01-26 00:17:13|Connor Sheehan <sheehan@mozilla.com>|terraform: add MPL header to all `.tf` files|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8680014bd3e0
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: remove bastion hosts and allow access to mirrors from MozVPN [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackNow that SSH access to the VPC is limited to MozVPN, there isno need for the bastion host we were previously using. Thiscommit removes the bastion module and all associated resources,and updates the mirrors security group to allow SSH from MozVPNthrough the VPN gateway.Differential Revision: https://phabr.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f171c8834780)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f171c8834780
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: use `aws_region` data source instead of passing around variable [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackRather than create the `awsregion` variable over and overagain, we can use the `aws_region` data source.Differential Revision: https://phabricator.services.mozilla.com/D16905|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8c91d9d3ee7f
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: restrict DHCP options set to Mozilla DNS [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackAfter running some DNS queries in the hg VPC, I noticed thatevery one of my queries hit the Mozilla DNS server, and externalrequests were being resolved non-authoritatively through thatserver. This commit removes the Amazon DNS servers from ourDHCP options set, so we don't hit them accidentally and triggerunexpected failures.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e39520f4f0d6)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=e39520f4f0d6
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: add Taskcluster VPC to subnet route tables [Bug 1516029](https://bugzilla.mozilla.org/show_bug.cgi?id=1516029)  r=bstackThis commit adds a route to send traffic from the TaskclusterCIDR block to the peering connection interface between ourVPC and the Taskcluster VPC. The block is passed as a parameterto the `ci-only` Terraform module and then sent to each privatesubnet route table as needed. Since managing the resource fromwithin Terraform .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0ab0ca88b098)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=0ab0ca88b098
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: allow all traffic from Taskcluster VPC in mirror security group [Bug 1516029](https://bugzilla.mozilla.org/show_bug.cgi?id=1516029)  r=bstackOpening up all traffic while we perform try pushes and othertests. Once we roll out to production we will limit this tothe relevant protocols and ports, but for now a permissivepolicy will allow us to collect flow logs and create betterrules.Differential Revision: https://phabricator.services.mozilla.c.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=22817c9f7d13)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=22817c9f7d13
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: use an internal load balancer [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstackThis commit creates an internal ALB resource to be used asthe endpoint for `us-west-2.hgmointernal.net`. Using an ALBwill allow us to stand up multiple instances across multipleAZs per region, while avoiding split-horizon DNS. The per-regionhostname (us-west-2.hgmointernal.net, etc) will resolve tothis load balancer which in turn will .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=50025cced335)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=50025cced335
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: add Route53 hosted zone and `hgmointernal` DNS record [Bug 1518706](https://bugzilla.mozilla.org/show_bug.cgi?id=1518706)  r=bstackTo route traffic from Taskcluster workers to the correctregion, we will use a Route53 private hosted zone thatresolves to the CI-only hgweb instances. This commitadds a hosted zone and test record to the Terraform `ci-only`module. The hostname selected is "hgmointernal.net".Differential Revision: https://phabric.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=48d2b14ec6ef)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=48d2b14ec6ef
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: create load balancer target group and listener [Bug 1516029](https://bugzilla.mozilla.org/show_bug.cgi?id=1516029)  r=bstackNow that we have our domain and SSL certificate set up, we canattach our resources to the internal load balancer. This commitcreates a load balancer target group for our mirror hosts andadds a listener which forwards https requests from our load balancerto the group.Differential Revision: https://phabricator.services.m.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7e6b97700959)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7e6b97700959
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: enable DNS hostnames in ci-only vpc [Bug 1518706](https://bugzilla.mozilla.org/show_bug.cgi?id=1518706)  r=bstackThe Route53 docs seem to indicate we will need this for DNSresolution to work. We don't actually need to run any queriesfor `hgmointernal.net` from the Mercurial VPC, but it doesn'thurt to have.Differential Revision: https://phabricator.services.mozilla.com/D16851|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=01ed676059c7
|3388|2019-01-25 19:35:11|Connor Sheehan <sheehan@mozilla.com>|terraform: rename `ci-only-west2` to `ci-only-uw2` [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=bstack"west2" could mean west-2 in some other continentsuch as eu-west-2.Differential Revision: https://phabricator.services.mozilla.com/D16906|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3791a58dde8a
|3387|2019-01-22 20:49:47|Connor Sheehan <sheehan@mozilla.com>|hgext: mark multiple client extensions as compatible with Mercurial 4.9 [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=smacleodMercurial 4.9rc0 was released this week. Before the official4.9 release is cut, we like to ensure client extensions ondeveloper machines are tested for compatibility with the upcomingversion. After running the tests against the release candidate,each of the following extensions passes without any code c.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a9b37e9dcc92)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a9b37e9dcc92
|3387|2019-01-22 20:49:47|Connor Sheehan <sheehan@mozilla.com>|robustcheckout: mark as compatible with Mercurial 4.9 and update tests [Bug 1513273](https://bugzilla.mozilla.org/show_bug.cgi?id=1513273)  r=smacleodThis commit marks robustcheckout as compatible with Mercurial4.9 and updates a failing test with conditional output on thenew version. The new output in the tests comes from the additionof a new `sparserevlog` repo requirement[0]. Essentially thisnew line in the test output indicates that the repo in que.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2dd596ba3855)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2dd596ba3855
|3385|2019-01-16 19:14:25|Connor Sheehan <sheehan@mozilla.com>|ansible: use `include_role` to apply Ansible roles in hgmo playbook [Bug 1502984](https://bugzilla.mozilla.org/show_bug.cgi?id=1502984)  r=globWith the recent upgrade to Ansible 2.5 in our deploymentenvironment, we can now leverage some modern features toenable incremental deployments to hgmo. One such featureis `include_role`[0], a module which effectively turnsthe role application directive from previous Ansibleversions into a basic module call. By .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a644255ded6c)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=a644255ded6c
|3385|2019-01-16 19:14:25|Connor Sheehan <sheehan@mozilla.com>|ansible/deploy: add command line flags to skip deploying to server types [Bug 1502984](https://bugzilla.mozilla.org/show_bug.cgi?id=1502984)  r=globThis commit adds command line flags to `./deploy` which willallow skipping of different server types while deploying tohg.mozilla.org (ie skip hgweb or hgssh).Differential Revision: https://phabricator.services.mozilla.com/D16223|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3510c55859a6
|3385|2019-01-16 19:14:25|Connor Sheehan <sheehan@mozilla.com>|ansible/hg-web: add `replicationrules` to vcsreplicator config if target host is a mirror [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globWhen we deploy the `hg-web` role to mirrors in AWS, wewant to apply replication filters to only transferdata about the repositories relevant to CI. This committeaches the hg-web role to add a pre-defined`replicationrules` config section to the vcsreplicator.inifile on the new host, when a .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fee20fefa9db)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fee20fefa9db
|3385|2019-01-16 19:14:25|Connor Sheehan <sheehan@mozilla.com>|ansible: add a playbook to deploy hgweb mirrors in AWS [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globThis commit adds a `bootstrap-hgweb.yml` playbook to run thevcsreplicator bootstrap procedure on hosts in a special Ansibleinventory group. The play runs the hgssh component of the bootstrap,which creates entries in the replication log for each repo on hg.mo,and produces a JSON artifact with information about the repositori.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6b1182c3debb)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6b1182c3debb
|3385|2019-01-16 19:14:25|Connor Sheehan <sheehan@mozilla.com>|ansible: add hgweb mirrors to hgmo deployment playbook [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  r=globThis commit adds the hgweb mirror hosts to the hgmo deploymentplaybook. Mirror hosts are applied the hg-web role with the`replication_filters` variable set to `True`. Similarlyto previous commits, we add a flag to the `./deploy` script tobe able to skip deploying to the mirror hosts.Differential Revision: https://phabricato.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=032f1e86530e)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=032f1e86530e
|3384|2019-01-15 20:21:40|Connor Sheehan <sheehan@mozilla.com>|hgmo: get `Remote-Addr` header from `rawenv` [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodThe Zeus load balancer sets an `X-Cluster-Client-Ip` headerto any request for hg.mo. The alternative header we use toidentify the source IP address, `Remote-Addr`, is set as anenvironment variable to the WSGI process that spawns to handlethe HTTP request. The mismatch in locations is due to theway Mercurial parses incoming HTTP r.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=84c42cc2838a)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=84c42cc2838a
|3383|2019-01-14 18:16:59|Connor Sheehan <sheehan@mozilla.com>|hgmo: don't split manifest into lines to check for `ec2region` parameter [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodNo need to split lines to correctly parse the manifest forAWS regions. It also makes my next few patches easier.Differential Revision: https://phabricator.services.mozilla.com/D16212|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=54de0d1af317
|3383|2019-01-14 18:16:59|Connor Sheehan <sheehan@mozilla.com>|hgmo: move `stream_clone_cmp` to a standalone function [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodIt is a pure function and doesn't need to be a closure.Differential Revision: https://phabricator.services.mozilla.com/D16213|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f8673c2b125b
|3383|2019-01-14 18:16:59|Connor Sheehan <sheehan@mozilla.com>|hgmo: move manifest filter and sort into standalone function [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodWith this functionality moved into a separate function wecan re-use it for use with private AWS mirrors.Differential Revision: https://phabricator.services.mozilla.com/D16214|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c2862b0dbf63
|3383|2019-01-14 18:16:59|Connor Sheehan <sheehan@mozilla.com>|terraform: move `instance_data.json` object to `/var/hg` on bootstrap [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodThis is essentially a hack around a bug in pre 18.4 versions ofcloud-init where the instance_data.json object would not persistacross reboots.[0]--[0] https://bugs.launchpad.net/cloud-init/+bug/1791781Differential Revision: https://phabricator.services.mozilla.com/D16215|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3548753ac274
|3383|2019-01-14 18:16:59|Connor Sheehan <sheehan@mozilla.com>|hgmo: serve stream clone bundles to private IP address on cloud instances [Bug 1518394](https://bugzilla.mozilla.org/show_bug.cgi?id=1518394)  r=smacleodWhen Taskcluster hosts pull/clone from private hgweb mirrors in CI,they do so over a VPC peering connection and do not cross the publicinternet. As a result, the IP address exposed to the hg process onthe mirror host sees a private IP address as the source location. Thisconfuses the clonebundles manif.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=09fa6119e23b)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=09fa6119e23b
|3382|2019-01-09 05:35:56|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: add `output` argument to hgssh bootstrap script [Bug 1428466](https://bugzilla.mozilla.org/show_bug.cgi?id=1428466)  commit adds an "output" argument to the hgssh bootstrapprocedure, which allows the JSON output to be saved toa specified path on the local host. Ansible deploymentscan then slurp the contents of this path and send the fileto a newly bootstrapped hgweb host.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=550944957db0
|3382|2019-01-09 05:35:56|Connor Sheehan <sheehan@mozilla.com>|vcsreplicator: logging improvements in bootstrap [Bug 1428466](https://bugzilla.mozilla.org/show_bug.cgi?id=1428466)  commit contains a few of the logging changesI have manually patched onto my test deploymentsin EC2, and I feel they are useful enough toland in vct. This commit will create a directoryat `/var/log/vcsrbootstrap` which will contain3 separate log files for Kafka consumer logs,Mercurial consumer logs and the logs createdby the vcsrepl.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f260c773c13f)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=f260c773c13f
|3381|2019-01-07 19:59:58|Steve Fink <sfink@mozilla.com>|[Bug 1517643](https://bugzilla.mozilla.org/show_bug.cgi?id=1517643)  - [bzexport] unified should win over [diff] context|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=895996b39668
|3379|2019-01-03 03:49:12|Connor Sheehan <sheehan@mozilla.com>|ansible: use `file` module instead of calling `chown` [Bug 1511058](https://bugzilla.mozilla.org/show_bug.cgi?id=1511058)  the Ansible version upgrade, this task spawnsa warning that using the `file` module is preferredover calling `chown` from the `command` module. Thiscommit changes the playbook to negate the warning.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1fd76f0c522c
|3379|2019-01-03 03:49:12|Connor Sheehan <sheehan@mozilla.com>|terraform: limit Bastion host SSH access to hosts behind MozVPN [Bug 1515721](https://bugzilla.mozilla.org/show_bug.cgi?id=1515721)  commit removes the elastic IP address allocatedto Bastion hosts by the `bastion` Terraform config.Instead, SSH access to the Bastion hosts will belimited to requests coming from behind the Mozillacorporate VPN and the Bastion will not be publiclyaccessible over the internet.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=02f7ea631cb1
|3378|2019-01-03 02:51:00|Axel Hecht <axel@pike.org>|mozext: matchdate is in dateutils [Bug 1500888](https://bugzilla.mozilla.org/show_bug.cgi?id=1500888)  r=sheehanAdding some tests for revset firstpushdate and pushdate, andtemplate firstpushdate.Code-wise, putting matchdate into the same bucket as makedate.Differential Revision: https://phabricator.services.mozilla.com/D15606|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=d22f56d7f8bd
|3377|2019-01-02 20:01:37|Connor Sheehan <sheehan@mozilla.com>|terraform: remove references to `gps` user [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039) |https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4f79353521b2
|3377|2019-01-02 20:01:37|Connor Sheehan <sheehan@mozilla.com>|terraform: switch `user_data` from a script to cloud-config [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  we intended to use a shell scriptto perform the bootstrap operations for new EC2instances. To make things simpler and sinceit can perform many of the actions we need anyway,I think a cloud config is more appropriate.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=3e12e83cfc97
|3375|2018-12-13 23:39:31|Connor Sheehan <sheehan@mozilla.com>|qimportbz: mark as compatible with Mercurial 4.8 [Bug 1501686](https://bugzilla.mozilla.org/show_bug.cgi?id=1501686)  pass with no changes.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=4285740c40de
|3374|2018-12-13 23:11:11|Connor Sheehan <sheehan@mozilla.com>|mqext: mark as compatible with Mercurial 4.8 [Bug 1501686](https://bugzilla.mozilla.org/show_bug.cgi?id=1501686)  pass with no changes.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6f7e482cb21f
|3373|2018-12-13 21:04:19|Andi-Bogdan Postelnicu <bpostelnicu@mozilla.com>|extensions: format-source should disable the 'mach' telemetry for the commands that it triggers. [Bug 1513216](https://bugzilla.mozilla.org/show_bug.cgi?id=1513216)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D14145|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=8af6070012c0
|3372|2018-12-11 18:50:25|Gregory Szorc <gps@mozilla.com>|hgmo: add test for filesdata command behavior [Bug 1513077](https://bugzilla.mozilla.org/show_bug.cgi?id=1513077)  r=sheehanThis test is based on an upstream test of the same name. Itdemonstrates some buggy behavior in Mercurial 4.8.1:1) linknode is wrong when the storage linknode refers to a changeset not in DAG ancestry2) file revision not transferred when storage linknode isn't in DAG ancestryDifferential Revision: https://phabricator.services.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fc6ee016a017)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=fc6ee016a017
|3372|2018-12-11 18:50:25|Gregory Szorc <gps@mozilla.com>|hgmo: replaces filesdata wire proto command with working version [Bug 1513077](https://bugzilla.mozilla.org/show_bug.cgi?id=1513077)  r=sheehanWe copy the command handler and supporting function from revision08cfa77d7288 of the Mercurial repository in order to work aroundbugs related to revision selection and linknodes.The test changes demonstrate that this has the intended effect.Differential Revision: https://phabricator.services.mozilla.com/D14111|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=ec53cd7868c1
|3371|2018-12-09 20:36:54|Julien Cristau <jcristau@mozilla.com>|qbackout: fix backing out a backout commit with mercurial 4.7+ [Bug 1512811](https://bugzilla.mozilla.org/show_bug.cgi?id=1512811)  r=sheehanrepo.__getitem__ no longers accepts a short changeset id.Differential Revision: https://phabricator.services.mozilla.com/D14014|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c56bcdcdae90
|3370|2018-12-07 18:16:46|Connor Sheehan <sheehan@mozilla.com>|hgmo: return default manifest if there are no entries for a region r=gpsWhen we resolve the AWS region for an IP address and thatregion has no manifest entries, we continue to iterate throughthe possible AWS IP blocks despite having already found theorigin region. We should consider this a failure and returnearly instead.Differential Revision: https://phabricator.services.mozilla.com/D13955|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c8beb8e1bbc4
|3369|2018-12-07 17:46:17|Axel Hecht <axel@pike.org>|mozext: remove critic [Bug 1511439](https://bugzilla.mozilla.org/show_bug.cgi?id=1511439)  r=gpscritic is buggy (see [Bug 1508686](https://bugzilla.mozilla.org/show_bug.cgi?id=1508686)  about passing wrong data in).Fixing the bugs seems to be a rabbit hole, so gps would ratherremove it.Use ./mach lint instead.Differential Revision: https://phabricator.services.mozilla.com/D13673|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c55c2fa5e5e4
|3368|2018-12-06 21:17:39|Gregory Szorc <gps@mozilla.com>|terraform: change logging prefix for S3 buckets; r=sheehanThe buckets are no longer just for bundles data. Let's changethe prefix accordingly.Differential Revision: https://phabricator.services.mozilla.com/D13943|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2667f48c9de4
|3367|2018-12-06 21:11:31|Gregory Szorc <gps@mozilla.com>|wireprotocache: handle indefinite length bytestrings in cacher; r=sheehanSee the inline comment.Differential Revision: https://phabricator.services.mozilla.com/D13942|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5d04ce5e2304
|3366|2018-12-06 20:29:31|Gregory Szorc <gps@mozilla.com>|hgmo: require Mercurial 4.8 to run hgmo extension; r=sheehanWe only need to support this extension on servers, where we are running4.8.Differential Revision: https://phabricator.services.mozilla.com/D13926|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=49e4623ce39f
|3366|2018-12-06 20:29:31|Gregory Szorc <gps@mozilla.com>|hgmo: cache rawstorefiledata response [Bug 1512346](https://bugzilla.mozilla.org/show_bug.cgi?id=1512346)  r=sheehanPartial clones make a request to this API for the changelog + manifestlogdata. This API will generate a few hundred megabytes for Firefox repos.Having the hg.mo servers in the critical path of serving that much datawould introduce a lot of data egress from the servers.This commit teaches that wire protocol command to cache responses.Com.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c66c9a8c33dc)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c66c9a8c33dc
|3365|2018-12-06 19:55:26|Connor Sheehan <sheehan@mozilla.com>|terraform: remove ci-only/outputs.tf [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  file is currently empty. We can re-add it if neededin the future.|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=7006560c3f5e
|3364|2018-12-06 18:33:10|Connor Sheehan <sheehan@mozilla.com>|terraform: add s3 module for various S3 buckets [Bug 1510795](https://bugzilla.mozilla.org/show_bug.cgi?id=1510795)  r=gpsThis commit adds an S3 module which configures buckets forvarious hg projects within different regions. As of now,we only create the clone/pull bundle packages in this module.In the near future we will add IAM policies to this module thatallow storing wire protocol responses as well.We also create an associated logging bucket with .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=994670fde7bd)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=994670fde7bd
|3363|2018-12-06 17:31:29|Gregory Szorc <gps@mozilla.com>|robustcheckout: only record clone when store does not exist; r=sheehanOtherwise we say we clone if a shared store exists and all we do is link theshared store.Differential Revision: https://phabricator.services.mozilla.com/D13910|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=53c65bf08e17
|3362|2018-12-06 17:30:22|Gregory Szorc <gps@mozilla.com>|robustcheckout: remove phase check; r=sheehanPer the inline comment, this check was added when we had a replication lagwindow resulting in phases not being transferred properly. The server-side issueis fixed and we no longer need this sanity check.The experimental partial clone support may not transfer phases data properlyand was triggering this check. But that's expected. Only a few tasks careabo.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6a3d26792f75)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=6a3d26792f75
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: create terraform directory with `privsubnet` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit creates a top-level `terraform` directory which willserve as the root module (with root module files to be added ina later commit) for all vcs-related Terraform configs goingforward. Within this directory we add a `modules` subdirectoryand populate it with the `privsubnet` module. This moduleconfigures a .. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5af7c52c365a)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5af7c52c365a
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: add `pubsubnet` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit adds a `pubsubnet` module to the Terraformconfigs. The module configures a public subnet within aspecified VPC, and attaches a NAT gateway that can receivetraffic from a private subnet (from the same AZ in practice).A route table is taken as input, which should include arule that sends outbound traffic within the subnet (includingtra.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=51c9d896efb0)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=51c9d896efb0
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: add a `bastion` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit adds a `bastion` module for configuringbastion hosts within a VPC. The module currently onlycreates a single host using the Ubuntu 18.04 AMI.A security group is created which allows only SSHinbound traffic to the host, and an elastic IPaddress is assigned to the host.Differential Revision: https://phabricator.services.mozilla.com/D12.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c560e78724f1)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=c560e78724f1
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: add an `hgweb-mirror` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit adds an `hgweb-mirror` module to the Terraformconfigs. This module creates a single EC2 instance intendedto be configured as an hgweb mirror. The new instance iscreated using the CentOS7 AMI and are intended to be assignedto a private subnet within a VPC. The instances use the c4.2xlinstance type and are assigned to security gr.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1ab302cec741)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=1ab302cec741
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: add the `ci-only` module [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit adds the `ci-only` module, which appliesthe config for a VPC containing all CI-only resourcesin a single AWS region. The module creates a VPCand attaches an internet gateway with an assignedelastic IP address. A route table is created witha rule to send all public subnet traffic to theinternet gateway. We then create a public and p.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5843de78b826)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=5843de78b826
|3361|2018-12-06 00:59:36|Connor Sheehan <sheehan@mozilla.com>|terraform: add root module files [Bug 1509039](https://bugzilla.mozilla.org/show_bug.cgi?id=1509039)  r=gpsThis commit adds the files for the Terraform root module.When running Terraform commands from a directory, any `.tf`files in that directory are considered to be within the`root` module, and all other infrastructure should becontained within the root module. We add the necessarymodule files and configure a single `ci-only` module,assigned to the `.. [continue reading](https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2713b7bee65f)|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=2713b7bee65f
|3359|2018-12-05 14:47:39|Andi-Bogdan Postelnicu <bpostelnicu@mozilla.com>|extensions: hg-format add missing space between command and arguments [Bug 1511594](https://bugzilla.mozilla.org/show_bug.cgi?id=1511594)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D13797|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=efdd5165c82e
|3358|2018-12-05 00:48:52|Andi-Bogdan Postelnicu <bpostelnicu@mozilla.com>|extensions: Improve hg-format source with default parameters on windows [Bug 1511594](https://bugzilla.mozilla.org/show_bug.cgi?id=1511594)  r=sheehanDifferential Revision: https://phabricator.services.mozilla.com/D13692|https://hg.mozilla.org/hgcustom/version-control-tools/pushloghtml?changeset=42179015d473



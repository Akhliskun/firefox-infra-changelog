## REPOSITORY NAME: CI-ADMIN
 CURRENT PUSH ID: 43

| Changeset | Date | Commiter | Commit Message | Commit URL | 
|:---:|:---:|:----:|:----------------------------------:|:-----:| 
|10|2018-08-30 16:35:55|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: generate moz-tree:* roles, too r=bstack,pmoore,tomprinceDepends on D2437Differential Revision: https://phabricator.services.mozilla.com/D2438|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=0c68bb31217c
|11|2018-08-30 16:36:23|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: add 'ci-admin check', upgrade requirements r=bstack,pmooreDifferential Revision: https://phabricator.services.mozilla.com/D2439|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=db811713c892
|12|2018-08-30 16:37:24|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: test for signing scopes r=bstack,pmoore,tomprinceThis is never going to be a super-secure check, but will help make sure wedon't do anything boneheaded.Depends on D2439Differential Revision: https://phabricator.services.mozilla.com/D2440|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=172a91b213c3
|13|2018-08-30 16:37:59|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: move ciconfig into sub-modules r=bstack,pmoore,tomprinceIf only because this avoids naming conflicts between modules defining the datastructure and modules generating resources based on those data structures..Depends on D2442Differential Revision: https://phabricator.services.mozilla.com/D2443|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=ee3a60eba89f
|14|2018-08-30 17:59:02|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: implement grants.yml; r=bstack,tomprince,pmooreIn the same commit, this removes all other code that sets repo roles or userroles, as otherwise they try to generate the same resources.  Checks in placeduring development (but not to land) ensure that actual scopes do not change.|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=e8c729ab1b15
|17|2018-09-05 22:37:30|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1479103: upgrade to the latest taskcluster client r=tomprinceDepends on D4244Differential Revision: https://phabricator.services.mozilla.com/D4246|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=2a84daadfd6e
|2|2018-06-25 22:23:52|Tom Prince <mozilla@hocat.ca>|Move repository specific roles to the project:* roles; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D1692|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=d0f7c2948f77
|22|2018-09-07 22:42:11|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1488766: also substitute {hgmo_path} r=tomprinceDifferential Revision: https://phabricator.services.mozilla.com/D5155|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=95397719f02d
|23|2018-09-07 22:42:24|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1488766: improve error handling for malformed grants.yml r=tomprinceDifferential Revision: https://phabricator.services.mozilla.com/D5158|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=135f264d65d2
|24|2018-09-10 17:54:50|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1489983: fix markdown link in descriptions r=janxDifferential Revision: https://phabricator.services.mozilla.com/D5430|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=5b8819a7b072
|25|2018-09-11 21:00:43|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1490066: fix unit tests and add a few r=tomprinceI broke the unit tests in bug 1488766 and also introduced a bug (no longerallowing granting to a single group); this fixes that up and even adds sometests.Differential Revision: https://phabricator.services.mozilla.com/D5464|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=edad9f8f78d4
|26|2018-09-12 23:04:50|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1489181: handle input_schema in actions.yml r=akiDifferential Revision: https://phabricator.services.mozilla.com/D5683|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=c88ca415a1c6
|27|2018-09-26 05:49:00|Tom Prince <mozilla@hocat.ca>|Don't generate hooks for actions with cross trust-domain `.taskcluster.yml`s; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D6858|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=9d35e153d813
|28|2018-10-22 20:50:28|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1494320 - remove unnecessary resources.manage r=tomprinceThese were in place in order to delete some old, now-unused roles.  They'regone, so no need to continue to manage those namespaces.Differential Revision: https://phabricator.services.mozilla.com/D9166|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=d1796b61fbd0
|29|2018-10-22 20:53:12|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1492665 - add support for environments.yml r=Callek,bstackDifferential Revision: https://phabricator.services.mozilla.com/D6932|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=241f75b5d808
|29|2018-10-22 20:53:12|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1492665 - add modify_resources support r=Callek,bstackDifferential Revision: https://phabricator.services.mozilla.com/D6933|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=99d859a7a655
|3|2018-06-26 01:48:19|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1381870 - deterministic ordering in schemas; r=tomprince|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=974df66d57dc
|30|2018-12-18 21:48:17|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1515137 - pass environment rootUrl to cron context r=tomprinceDifferential Revision: https://phabricator.services.mozilla.com/D14882|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=0f4b1e9e03cd
|31|2019-01-02 22:26:29|Aki Sasaki <asasaki@mozilla.com>|Bug 1485680 - if we modify the action hook task logic, we need to update scriptworker. r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D15482|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=b2d0f7af52d2
|32|2019-01-17 00:47:14|Tom Prince <mozilla@hocat.ca>|Fix ci-admin tests; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D16756|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=ae0505b4301c
|33|2019-01-18 23:21:58|Tom Prince <mozilla@hocat.ca>|Fix flake8 errors; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D16769|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=65b3e50a57e4
|34|2019-01-18 23:36:42|Tom Prince <mozilla@hocat.ca>|Fix typo from flake8 run; r=me|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=8fe80858db7f
|35|2019-01-31 22:30:54|Tom Prince <mozilla@hocat.ca>|Run black over ci-admin; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D17166|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=de24b6b4d2d6
|36|2019-02-07 22:08:59|Tom Prince <mozilla@hocat.ca>|Bug 1525368: Update path to ci-config; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D18866|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=99df1c34dbc0
|37|2019-02-08 04:32:23|Tom Prince <mozilla@hocat.ca>|Bug 1525368: Make ci-admin authorative for all repositories on hg.mozilla.org; r=dustinI noticed this when I didn't see the build/ci-{admin,configuration} roles being removed.This removes roles for:- integration/b2g-inbound- integration/fx-team- projects/alder- projects/fig- projects/gum- projects/holly- users/mozilla_hocat.ca/comm-taskclusterall of which are not currently in use.Differential Revision: https://phabricator.services.mozilla.com/D19063|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=7cccaaf6c74b
|38|2019-02-11 23:30:33|Tom Prince <mozilla@hocat.ca>|Bug 1492562: Add intial taskgraph configuration; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D17165|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=f4aed57a506c
|39|2019-02-11 23:51:13|Tom Prince <mozilla@hocat.ca>|Run yamllint against the taskgraph configuration; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D19101|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=36e7c76919c0
|4|2018-07-10 00:04:11|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1471353 - don't generate hooks for try repos; r=tomprince|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=e395b51eda57
|4|2018-07-10 00:04:11|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1471353 - filer action hooks by level, too; r=tomprinceGiven an action at level L, only include hooks with hashes for projects atlevel L or higher.|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=9bbb5b8bfb97
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Make `run_async` and `with_aiohttp_session` decorators preserve the return value; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D19395|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=6afd709457e5
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Import pytest-asyncio's `event_loop` fixture as session scope; r=dustinpytest-asyncio's `event_loop` is function scoped, to provide good isolationbetween tests. ci-admin's checks aren't code tests (so the isolation isn'trelevant), and it is useful to be able to write session scoped fixture forthem.https://github.com/pytest-dev/pytest-asyncio/issues/75Differential Revision: https://phabricator.services.mozilla.com/D19396|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=39be30e3992c
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Stop invoking pytest in `ci-admin check` with an event loop running; r=dustinThis allows the tests themselves to use pytest-asyncio, which doesn'twork with a running event loop.Differential Revision: https://phabricator.services.mozilla.com/D19397|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=5ca0a3b818bf
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Make `ci-admin check` command-line more useful; r=dustinThis allows:- running `ci-admin check` from outside the ci-admin repository.- specifying checks to run with just the bare filename, rather than full path.Differential Revision: https://phabricator.services.mozilla.com/D19398|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=336043f64e85
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Use `check_` prefixes for `ci-admin check` tests; r=dustinThis makes it obvious that the tests are related to `ci-admin check` ratherthan typical unit tests.Differential Revision: https://phabricator.services.mozilla.com/D19399|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=6af4c3fa6a44
|41|2019-02-12 05:51:03|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Check project levels in projects.yml match hg.mozilla.org; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D19400|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=3111e4fe89c4
|42|2019-02-13 23:21:08|Tom Prince <mozilla@hocat.ca>|No bug: Remove duplicate code for making ci-admin authorative for some hg.mozilla.org repositories; r=dustinSince ci-admin is authorative for all hg.mozilla.org repositories(7cccaaf6c74b), we don't need additionally make it authorative for just some ofthem.Differential Revision: https://phabricator.services.mozilla.com/D19706|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=616e7df21c86
|43|2019-02-13 23:23:04|Tom Prince <mozilla@hocat.ca>|Bug 1465844: Special case `scm_autoland in checking levels; r=dustinDifferential Revision: https://phabricator.services.mozilla.com/D19705|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=e3bff21ba760
|6|2018-07-19 18:40:35|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465838 - add run-task.py; r=tomprinceThis repository does not need a decision task, but it does need to be easy torun a diff.  More precisely, we need a stable way to run a diff so that it canbe "hard coded" in several places: * ci-admin's .taskcluster.yml * ci-configuration's .taskcluster.yml * gecko task-graph configuration * a hook to perform diffs periodically|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=f65347a2063f
|6|2018-07-19 18:40:35|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465838 - exit with nonzero status when diffs exist; r=tomprince|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=11e43930efa9
|7|2018-07-27 22:35:20|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465841: fix broken tests|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=ebc69a99a0d0
|7|2018-07-27 22:35:20|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465841: use parent_repo instead of gecko_repo|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=30aa26c04c72
|7|2018-07-27 22:35:20|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465841: handle gecko-actions, gecko-roles featuresThis also moves the extra_tc_scopes into the `repo:..` role, rather than in thetrust-level-specific role.  I anticipate future work will actually get rid ofall this complex role inheritance, so this is probably a taste of the future.It also grants active_scm_level_1 access to nss-try's scopes, andactive_scm_level_3 access to ci-admin/ci-configuration's scopes.  I don't thinkthis is an issue.|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=c70228f3a604
|8|2018-08-30 15:25:34|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: refactor ciadmin.util into sub-modules r=bstack,pmoore,tomprinceDifferential Revision: https://phabricator.services.mozilla.com/D2436|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=be60b1036f12
|9|2018-08-30 15:31:09|Dustin J. Mitchell <dustin@mozilla.com>|Bug 1465842: Add scope utilities r=bstack,pmoore,tomprinceThis includes a resolver that emulates taskcluster-auth, and will be used tomake some checks about the result of proposed role changes.Depends on D2436Differential Revision: https://phabricator.services.mozilla.com/D2437|https://hg.mozilla.org/ci/ci-admin/pushloghtml?changeset=5b98b1b7f3ee


